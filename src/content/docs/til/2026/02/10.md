---
title: "2026-02-10 (월)"
description: "OS Storage 공부"
tags: ["TIL", "Astro", "OS", "Storage"]
created: 2026-02-10
updated: 2026-02-10
slug: til/2026-02-10
sidebar:
  order: 4
---

## 배운 것

### 저장장치 기초 — 물리에서 논리로

- **LBA (Logical Block Addressing)**: CHS(Cylinder-Head-Sector) 3차원 주소를 1차원 블록 번호로 추상화. OS가 디스크 물리 구조를 몰라도 되게 만드는 핵심 추상화 계층
- **ECC**: 패리티 → 체크섬 → CRC(검출), 해밍 코드 → Reed-Solomon → LDPC(정정)으로 발전. HDD는 섹터별, SSD는 페이지별, ECC 메모리는 64+8=72비트 단위로 적용
- **소프트 에러 vs 하드 에러**: 우주선 등 일시적 원인(소프트)은 ECC가 자동 복구, 물리적 손상(하드)은 배드 블록 처리 + RAID로 대응

### HDD vs SSD — 구조적 차이가 만드는 트레이드오프

- **HDD**: 회전하는 플래터 + 기계식 헤드. 순차 읽기 빠르지만 랜덤 I/O에 약함 (seek time + rotational latency)
- **SSD**: NAND 플래시 기반. 랜덤 I/O 강하지만 write amplification, 쓰기 수명 제한이라는 고유 문제
- **NAND Flash 관리**: FTL(Flash Translation Layer)이 논리-물리 주소 변환, GC(Garbage Collection)가 무효 페이지 회수, 웨어 레벨링이 셀 수명 균등화 담당

### 파일시스템 — 데이터를 조직하는 방식

- **UNIX Inode**: 파일 메타데이터 + 블록 포인터 구조. 직접 블록(12개) → 간접 → 이중 간접 → 삼중 간접으로 확장. 파일 이름은 inode에 없고 디렉토리 엔트리에 존재
- **BSD Cylinder Group**: 관련 데이터를 디스크의 인접 영역에 배치하여 seek 최소화. Version 7 대비 약 10배 성능 향상 (3% → 30% 디스크 대역폭 활용)
- **Journaling**: 메타데이터 변경을 트랜잭션 로그에 먼저 기록. 비정상 종료 시 전체 fsck 대신 로그만 재생하면 됨
- **NTFS**: MFT(Master File Table) 기반. 모든 것이 파일(메타데이터 포함). 다중 데이터 스트림, B+ 트리 디렉토리, 트랜잭션 로깅 지원
- **ZFS**: 볼륨 관리 + 파일시스템 통합. 모든 블록에 체크섬 적용(silent corruption 방지), COW(Copy-on-Write)로 스냅샷/클론 지원

### RAID — 신뢰성과 성능의 트레이드오프

- **RAID 0**: 스트라이핑만 (성능 ↑, 신뢰성 ↓)
- **RAID 1**: 미러링 (신뢰성 ↑, 용량 50%)
- **RAID 5**: 분산 패리티 (읽기 성능 ↑, 쓰기 시 패리티 계산 오버헤드)
- **RAID 1+0 vs 0+1**: 중첩 RAID에서 장애 허용 범위 차이. 1+0이 장애 허용 능력이 더 높음

### 저장장치 연결과 초기화

- **DAS/NAS/SAN**: 직접 연결 → 네트워크 파일 공유 → 블록 수준 네트워크 스토리지로 확장
- **저장장치 초기화 과정**: 물리 포맷(Low-Level Format) → 파티셔닝 → 논리 포맷(파일 시스템 생성) → 부트 블록 설정
