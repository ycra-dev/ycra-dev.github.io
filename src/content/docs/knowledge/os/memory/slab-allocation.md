---
title: "슬랩 할당 (Slab Allocation)"
description: "커널 객체 유형별로 캐시를 만들고, 미리 생성된 객체를 재사용하여 단편화 없이 빠르게 할당하는 기법"
tags: ["OS", "Memory", "Kernel"]
created: 2026-01-27
updated: 2026-01-27
draft: false
slug: knowledge/os/slab-allocation
sidebar:
  order: 11
---

## 핵심 개념

슬랩 할당(Slab Allocation)은 커널 객체 유형별로 캐시를 만들고, 미리 생성된 객체를 재사용하여 단편화 없이 빠르게 메모리를 할당하는 기법입니다. 버디 시스템은 작은 커널 객체 할당에 최대 50% 내부 단편화가 발생하므로, 동일 유형 객체를 반복적으로 할당/해제하는 커널에 최적화된 할당자가 필요합니다.

## 동작 원리

### 구조

1. 커널 데이터 구조 유형별로 **캐시(cache)** 생성
2. 각 캐시는 하나 이상의 **슬랩(slab)**으로 구성
3. 슬랩은 물리적으로 연속된 페이지들로, 동일 크기 객체들로 분할
4. 객체 요청 시 캐시에서 free 객체 할당
5. 객체 해제 시 캐시로 반환 (실제 메모리 해제하지 않음)

```
┌─────────────────────────────────────────┐
│              Kernel                      │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ │
│  │ Cache:   │ │ Cache:   │ │ Cache:   │ │
│  │ task_    │ │ inode    │ │ file     │ │
│  │ struct   │ │          │ │ object   │ │
│  └────┬─────┘ └────┬─────┘ └────┬─────┘ │
│  ┌────┴────┐  ┌────┴────┐  ┌────┴────┐  │
│  │ Slabs   │  │ Slabs   │  │ Slabs   │  │
│  │ [][][]  │  │ [][][]  │  │ [][][]  │  │
│  └─────────┘  └─────────┘  └─────────┘  │
└─────────────────────────────────────────┘
```

### 슬랩의 세 가지 상태

| 상태 | 설명 | 할당 우선순위 |
|------|------|--------------|
| **Partial** | 일부 used, 일부 free | **1순위** |
| **Empty** | 모두 free | 2순위 |
| **Full** | 모두 used | 할당 불가 |

할당: partial slab → empty slab → 새 slab 생성

### 주요 장점

1. **단편화 없음**: 정확한 객체 크기로 분할 (3KB 요청 → 3KB 할당)
2. **빠른 할당/해제**: 미리 생성된 free 객체 반환 → O(1)
3. **객체 재사용**: 해제된 객체의 초기화 상태 유지 → 재할당 시 비용 절감

### Linux 구현체

| 이름 | 특징 |
|------|------|
| **SLAB** | 원조, per-CPU 캐시 |
| **SLUB** | 현재 기본, 메타데이터를 page 구조체에 저장, 오버헤드 감소 |
| **SLOB** | 임베디드용, 단순, 메모리 적은 시스템용 |

## 예시

사무용품 창고와 같습니다. 볼펜, 포스트잇 등 품목별로 정리된 선반에서 바로 꺼내고, 반납하면 다시 선반에 배치합니다.

- 장점: 단편화 제거, 매우 빠른 할당/해제, 객체 초기화 비용 절감
- 단점: 미리 할당해두므로 유휴 메모리 발생 가능, 범용 메모리 할당에는 부적합

## 관련 개념

- [버디 시스템 (Buddy System)](/knowledge/os/buddy-system/) — 큰 블록 할당
- [메모리 단편화 (Memory Fragmentation)](/knowledge/os/fragmentation/)
- [가상 메모리 (Virtual Memory)](/knowledge/os/virtual-memory/)
