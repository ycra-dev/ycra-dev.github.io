---
title: "BSD 실린더 그룹 (Cylinder Group)"
description: "BSD Fast File System(FFS)에서 관련 데이터를 디스크의 인접 영역에 배치하여 seek 시간을 최소화하는 할당 단위"
tags: ["OS", "Storage", "FileSystem", "FFS"]
created: 2026-01-23
updated: 2026-02-10
draft: false
slug: knowledge/os/bsd-cylinder-group
sidebar:
  order: 10
---

import NestedDiagram from '../../../../../components/NestedDiagram.astro';
import StepFlow from '../../../../../components/StepFlow.astro';
import LayerStack from '../../../../../components/LayerStack.astro';

## 핵심 개념

실린더 그룹(Cylinder Group)은 BSD Fast File System(FFS)에서 관련 데이터를 디스크의 인접 영역에 배치하여 seek 시간을 최소화하는 할당 단위이다. Version 7 파일 시스템은 아이노드와 데이터 블록이 디스크 전체에 흩어져 seek 오버헤드가 컸기 때문에, 파일의 아이노드와 데이터 블록을 가깝게 배치하여 성능을 향상시켰다.

## 동작 원리

디스크는 여러 실린더로 구성되며, 같은 실린더 내 접근은 seek가 불필요하다.

### 실린더 그룹 구성 (각 그룹마다)

<div style="max-width: 480px; margin: 0 auto;">
<NestedDiagram
  title="파일 시스템 — 실린더 그룹 레이아웃"
  items={[
    {
      label: "Cylinder Group 0",
      children: [
        { label: "superblock*" },
        { label: "cylinder block" },
        { label: "inodes" },
        { label: "data blocks" },
      ]
    },
    {
      label: "Cylinder Group 1",
      highlight: true,
      children: [
        { label: "superblock*", highlight: true },
        { label: "cylinder block", highlight: true },
        { label: "inodes", highlight: true },
        { label: "data blocks", highlight: true },
      ]
    },
  ]}
/>
</div>

\* 슈퍼블록은 복구를 위해 각 그룹에 복사, 오프셋은 다름

### 할당 정책

- 파일의 아이노드: 부모 디렉토리와 같은 실린더 그룹
- 새 디렉토리의 아이노드: 다른 실린더 그룹 (분산)
- 데이터 블록: 아이노드와 같은 실린더 그룹
- 큰 파일(>2MB): 일정 크기마다 다른 실린더 그룹으로 리다이렉트

### 블록과 프래그먼트

큰 블록(4-8KB)과 작은 프래그먼트(512-1024B) 조합으로 내부 단편화를 감소시킨다.

## 예시

실린더 그룹은 "도서관의 서가"와 같다. 관련 책(파일)을 같은 서가(실린더 그룹)에 모아두면 찾기 쉽다.

`/home/user/doc.txt` 생성 시:

<StepFlow
  title="파일 생성 과정"
  steps={[
    { label: "free inode 할당", description: "user 디렉토리의 실린더 그룹에서" },
    { label: "데이터 블록 할당", description: "같은 실린더 그룹에서" },
    { label: "빠른 ls 조회", description: "모든 inode가 근처에 있어 seek 최소" },
  ]}
/>

- 디스크 seek 시간 대폭 감소 (관련 데이터 근접)
- 슈퍼블록 복제로 안정성 향상
- Version 7 대비 약 10배 성능 향상 (3% → 30% 디스크 대역폭 활용)
- 단점: 10% 정도 여유 공간 필요, 프래그먼트 재할당 시 복사 오버헤드
