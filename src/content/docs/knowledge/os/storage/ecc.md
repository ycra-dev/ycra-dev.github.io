---
title: "오류 검출과 정정 (ECC)"
description: "데이터 전송 및 저장 과정에서 발생하는 오류를 검출하고 정정하는 기법"
tags: ["OS", "Storage", "Reliability"]
created: 2026-01-27
updated: 2026-01-27
draft: true
slug: knowledge/os/ecc
sidebar:
  order: 10
---

## 핵심 개념

오류 검출과 정정(Error-Correcting Code, ECC)은 데이터가 저장되거나 전송되는 과정에서 발생하는 **비트 오류를 발견하고 고치는 기법**이다. 디스크, 메모리, 네트워크 등 모든 데이터 경로에서 오류는 불가피하므로, 이를 자동으로 처리하는 메커니즘이 필수적이다.

## 동작 원리

### 오류 검출 기법

| 기법 | 원리 | 능력 | 사용처 |
|------|------|------|--------|
| **패리티 비트** | XOR 연산으로 1의 개수를 짝수/홀수로 맞춤 | 단일 비트 오류 검출, 2비트 오류 미검출 | 메모리, 직렬 통신 |
| **체크섬** | 데이터를 블록 단위로 더한 후 모듈러 연산 | 단순 오류 검출 | IP/TCP 헤더 |
| **CRC (Cyclic Redundancy Check)** | 다항식 나눗셈의 나머지를 검증 값으로 사용 | 다중/버스트 오류 검출 가능 | 이더넷, HDD, USB |

### 오류 정정 기법

오류 검출은 "틀렸다"를 알려주지만, 오류 정정은 "어디가 틀렸고 원래 값은 무엇인지"까지 알려준다.

| 기법 | 능력 | 사용처 |
|------|------|--------|
| **해밍 코드 (Hamming Code)** | 단일 비트 오류 정정 (SEC), 이중 비트 오류 검출 (DED) | ECC 메모리 |
| **Reed-Solomon 코드** | 다중 비트/바이트 오류 정정 | CD/DVD, QR 코드, SSD |
| **LDPC (Low-Density Parity-Check)** | 높은 비트 에러율에서도 강력한 정정 | SSD(NAND Flash), 5G |

### 저장장치별 ECC 적용

- **HDD**: 각 섹터(512B 또는 4KB)에 ECC 트레일러를 붙여 저장. 읽을 때마다 ECC 검증.
- **SSD**: 각 페이지(4~16KB) 단위로 ECC 적용. NAND Flash는 HDD보다 비트 에러율이 높아 더 강력한 ECC(LDPC, BCH) 사용.
- **ECC 메모리**: 64비트 데이터 + 8비트 ECC = 72비트. 단일 비트 오류 자동 정정, 이중 비트 오류 검출.

### 소프트 에러 vs 하드 에러

| 구분 | 원인 | ECC 처리 | 복구 방법 |
|------|------|----------|-----------|
| **소프트 에러** | 우주선, 전기적 노이즈 등 일시적 원인 | 정정 가능 | ECC가 자동 복구 |
| **하드 에러** | 물리적 손상 (미디어 결함) | 정정 불가 | 배드 블록 처리, RAID로 복구 |

소프트 에러는 다시 읽으면 정상이지만, 하드 에러는 해당 위치가 영구적으로 손상된 것이다.

## 예시

해밍 코드의 단일 비트 오류 정정 과정:

```
원본 데이터: 1011

해밍 코드 인코딩 (7비트):
위치:  1  2  3  4  5  6  7
값:    P1 P2 1  P4 0  1  1
       ↓  ↓     ↓
       패리티 비트 (자동 계산)

P1 = 위치 1,3,5,7 XOR = 1⊕0⊕1 = 0
P2 = 위치 2,3,6,7 XOR = 1⊕1⊕1 = 1
P4 = 위치 4,5,6,7 XOR = 0⊕1⊕1 = 0

전송: 0 1 1 0 0 1 1

5번 비트에 오류 발생: 0 1 1 0 [1] 1 1

검증:
P1 체크: 0⊕1⊕1⊕1 = 1 (오류)
P2 체크: 1⊕1⊕1⊕1 = 0 (정상)
P4 체크: 0⊕1⊕1⊕1 = 1 (오류)

오류 위치 = P4×4 + P2×0 + P1×1 = 4+0+1 = 5
→ 5번 비트를 반전하여 정정
```

## 관련 개념

- [논리 블록 주소 (LBA)](/knowledge/os/lba/)
