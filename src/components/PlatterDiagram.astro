---
interface Props {
  title?: string;
}

const { title } = Astro.props;
---

<div class="platter-diagram">
  {title && <div class="diagram-title">{title}</div>}
  <svg viewBox="0 0 350 315" class="platter-svg">
    <!-- Platter base -->
    <circle cx="160" cy="155" r="132" class="platter-bg" />

    <!-- Tracks (7 concentric circles) -->
    <circle cx="160" cy="155" r="120" class="track" />
    <circle cx="160" cy="155" r="108" class="track" />
    <circle cx="160" cy="155" r="96" class="track" />
    <circle cx="160" cy="155" r="84" class="track" />
    <circle cx="160" cy="155" r="72" class="track" />
    <circle cx="160" cy="155" r="60" class="track" />
    <circle cx="160" cy="155" r="48" class="track" />

    <!-- Sector highlight (arc between outermost two tracks, ~-75° to ~-40°) -->
    <path
      d="M 191 39 A 120 120 0 0 1 252 78 L 243 86 A 108 108 0 0 0 188 51 Z"
      class="sector"
    />

    <!-- Spindle -->
    <circle cx="160" cy="155" r="20" class="spindle" />
    <circle cx="160" cy="155" r="5" class="spindle-center" />

    <!-- Disk arm -->
    <line x1="160" y1="155" x2="318" y2="90" class="arm" />
    <rect x="312" y="80" width="20" height="11" rx="3" transform="rotate(-22 322 85)" class="head" />

    <!-- Label: 섹터 -->
    <line x1="248" y1="68" x2="262" y2="56" class="label-line" />
    <text x="276" y="52" class="label" text-anchor="start">섹터</text>

    <!-- Label: 헤드 -->
    <text x="330" y="75" class="label" text-anchor="middle">헤드</text>

    <!-- Label: 트랙 -->
    <line x1="255" y1="220" x2="268" y2="226" class="label-line" />
    <text x="280" y="232" class="label" text-anchor="start">트랙</text>

    <!-- Label: 스핀 -->
    <text x="160" y="159" class="label spindle-label">스핀</text>
  </svg>
</div>

<style>
  .platter-diagram {
    margin: 1.5rem 0;
  }

  .diagram-title {
    text-align: center;
    font-weight: 600;
    font-size: 0.85rem;
    color: var(--sl-color-gray-2);
    margin-bottom: 0.5rem;
  }

  .platter-svg {
    width: 100%;
    max-width: 380px;
    height: auto;
    display: block;
    margin: 0 auto;
  }

  .platter-bg {
    fill: var(--sl-color-gray-6);
    stroke: var(--sl-color-gray-4);
    stroke-width: 2;
  }

  .track {
    fill: none;
    stroke: var(--sl-color-gray-4);
    stroke-width: 1.2;
    stroke-dasharray: 5 3;
  }

  .sector {
    fill: var(--sl-color-accent-low);
    stroke: var(--sl-color-accent);
    stroke-width: 1.5;
    opacity: 0.85;
  }

  .spindle {
    fill: var(--sl-color-gray-5);
    stroke: var(--sl-color-gray-3);
    stroke-width: 2;
  }

  .spindle-center {
    fill: var(--sl-color-gray-3);
  }

  .arm {
    stroke: var(--sl-color-gray-3);
    stroke-width: 3;
    stroke-linecap: round;
  }

  .head {
    fill: var(--sl-color-accent);
    stroke: var(--sl-color-accent-high);
    stroke-width: 1;
  }

  .label {
    fill: var(--sl-color-gray-2);
    font-size: 12px;
    font-weight: 600;
  }

  .spindle-label {
    font-size: 10px;
    text-anchor: middle;
    dominant-baseline: middle;
  }

  .label-line {
    stroke: var(--sl-color-gray-3);
    stroke-width: 1;
  }
</style>
